<!DOCTYPE html>
<html lang="pt-BR">
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Detalhes do Evento</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">

    <style>
        body {
            background: #f5f5f5;
        }
        .card {
            border-radius: 12px;
        }
        .banner {
            width: 100%;
            height: 260px;
            object-fit: cover;
            border-radius: 12px;
        }
        .titulo {
            font-size: 2.2rem;
            font-weight: bold;
        }
        .subtitulo {
            font-size: 1.2rem;
            color: #666;
        }
    </style>
</head>
<body class="container py-4">

<a href="index.html" class="btn btn-secondary mb-4">‚Üê Voltar</a>

<div id="eventoContainer"></div>

<script>
async function carregarEvento() {
    const params = new URLSearchParams(window.location.search);
    const id = params.get("id");

    if (!id) {
        document.getElementById("eventoContainer").innerHTML = "<p>Evento n√£o encontrado.</p>";
        return;
    }

    // Carrega evento
    const eventoResp = await fetch(`http://localhost:3000/eventos/${id}`);
    const evento = await eventoResp.json();

    // Carrega cidades
    const cidadesResp = await fetch(`http://localhost:3000/lugares`);
    const cidades = await cidadesResp.json();

    const cidade = cidades.find(c => c.id == evento.cidadeId);
    const atracao = cidade?.atracoes?.find(a => a.id == evento.atracaoId);

    const nomeCidade = cidade ? cidade.nome : "Cidade n√£o encontrada";
    const nomeAtracao = atracao ? atracao.nome : "Atra√ß√£o n√£o encontrada";

    // Imagem principal (se existir)
    const imagem = cidade?.imagem_pincipal ?? "";

    document.getElementById("eventoContainer").innerHTML = `
        <div class="card shadow p-4">

            ${imagem ? `<img src="${imagem}" class="banner mb-3">` : ""}

            <h1 class="titulo">${evento.titulo}</h1>
            <p class="subtitulo">${evento.descricaoCurta}</p>

            <hr>

            <p><strong>üìÖ Data:</strong> ${evento.data}</p>
            <p><strong>üìç Cidade:</strong> ${nomeCidade}</p>
            <p><strong>‚≠ê Atra√ß√£o:</strong> ${nomeAtracao}</p>

            <hr>

            <h4 class="mt-3">Descri√ß√£o Completa</h4>
            <p>${evento.descricao}</p>

            <hr>

            <h4 class="mt-3">Sobre a Cidade</h4>
            <p>${cidade?.conteudo ?? "Sem informa√ß√µes da cidade."}</p>

            <h4 class="mt-3">Detalhe da Atra√ß√£o</h4>
            <p>${atracao?.descricao ?? "Sem informa√ß√µes da atra√ß√£o."}</p>

        </div>
    `;
}

carregarEvento();
</script>

</body>
</html>
